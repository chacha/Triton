<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Triton</title>
        <link href="style.css" rel="stylesheet">
        <script src="lib.js"></script>
        <script src="jquery.js"></script>
        <script src="json.js"></script>
        <script src="autogrow.js"></script>
        <script src="hotkeys.js"></script>
        <script src="Thread.js"></script>
        <script src="ThreadEncoder.js"></script>
        <script src="TritonSidebar.js"></script>
        <script src="TritonKUI.js"></script>
        <script src="TritonEditor.js"></script>
    </head>
    <body>
        <div id="wash">&nbsp;</div>
        <nav>
            <div id="advanced">
                <div id="documents">
                    <header>
                        Documents
                    </header>
                    <ul id="document-list">
                    </ul>
                </div>
            </div>
            <header>
                <a id="logo">Triton</a>
                <div class="meta">
                    v 0.1. &copy 2010 Tyler Carter
                </div>
            </header>
            <ul id="links">
                <li><a href="#" id="create_new">New Post</a></li>
                <li><a href="#new" id="new_doc">New Document</a></li>
                <li><a href="#" id="delete_doc">Delete Document</a></li>
            </ul>
            <div id="overview">
            </div>
        </nav>
        <div id="posts"></div>
        <pre id="object"></pre>
        <script>
            (function(){

                // Get the Thread
                var post_key = window.location.hash.substr(1);
                
                // Start up the editor
                var editor = TritonEditor(window);
                editor.init();
                var thread = editor.getThread();
                var encoder = editor.getEncoder();

                // Special Case Items
                $("#delete_all").click(function(){
                    thread.deleteAll();
                    encoder.sleep(post_key, thread);
                    editor.draw();
                });

                $("#create_new").click(function(){
                   editor.createPost();
                });


                $("#redraw").click(function(){
                    editor.draw();
                })

                $("section").mouseover(function(){
                    
                });

                $("#new_doc").click(function(){
                    location.hash = "new";
                    location.reload(true);
                })

                $("#delete_doc").click(function(){
                    encoder.remove(thread.getID())
                });


                var openNav = function(){
                    $("nav").animate({"right": "0px"});
                    $("#wash").show()
                    $("#logo").unbind("click");
                    $("#logo").click(closeNav);
                    $("#wash").click(closeNav);
                }

                var closeNav = function(){
                    $("nav").animate({"right": "-320px"});
                    $("#wash").hide()
                    $("#logo").unbind("click");
                    $("#logo").click(openNav);
                }
                $("#logo").click(openNav);
                   
                
                
            })();

        </script>
    </body>
</html>
