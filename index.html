<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <link href="style.css" rel="stylesheet">
        <script src="lib.js"></script>
        <script src="jquery.js"></script>
        <script src="json.js"></script>
        <script src="autogrow.js"></script>
        <script src="hotkeys.js"></script>
        <script src="Thread.js"></script>
        <script src="ThreadEncoder.js"></script>
        <script src="TritonSidebar.js"></script>
        <script src="TritonKUI.js"></script>
        <script src="TritonEditor.js"></script>
    </head>
    <body>
        <nav>
            <header>
                Triton
                <div class="meta">
                    v 0.1. &copy 2010 Tyler Carter
                </div>
            </header>
            <ul>
                <li><a href="#" id="create_new">Create New</a></li>
                <li><a href="#" id="redraw">Redraw</a></li>
                <li><a href="#" id="delete_all">Delete All</a></li>
            </ul>
            <div id="overview">
                <header>
                    Overview
                </header>
                <ul id="overview-list"></ul>
            </div>
        </nav>
        <div id="posts"></div>
        <pre id="object"></pre>
        <script>
            (function(){

                // Start Up

                // Configuration
                var post_key = "thread";

                // Create the Encoder
                var threadEncoder = Encoder();
                
                // Retrieve the Thread

                // Check if a thread has already been saved
                if(typeof window.localStorage.getItem(post_key) != "string"){

                    // If not, create one
                    var thread = threadEncoder.create();

                }else{

                    // Retrieve the saved thread
                    var thread = threadEncoder.restore(post_key);
                    
                }

                // Start up the editor
                var editor = TritonEditor(thread, threadEncoder);
                editor.init();

                var sidebar = TritonSidebar(thread);
                sidebar.init();

                // Special Case Items
                $("#delete_all").click(function(){
                    thread.deleteAll();
                    threadEncoder.sleep(post_key, thread);
                    editor.draw();
                });

                $("#create_new").click(function(){
                   editor.createPost();
                });


                $("#redraw").click(function(){
                    editor.draw();
                })

                $("section").mouseover(function(){
                    
                });
                
            })();

        </script>
    </body>
</html>
